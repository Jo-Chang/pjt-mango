{% extends 'base.html' %}

{% block content %}
{% load static %}
<div class="container-fluid" style="padding: 0;">
    <header class="d-flex justify-content-center align-items-center">
        <div class="container-fluid bg-image w-100" style="background-image: url('{% static 'main_page.avif' %}'); text-shadow: 1px 1px 2px #DF3A01, 0 0 1em #DF3A01, 0 0 0.2em #DF3A01;">
            <h1 class="title text-light text-center mt-5" style="font-size: larger;">솔직한 리뷰, 믿을 수 있는 평점!</h1>
            <h1 class="title text-light text-center" style="font-size: larger;">망고플레이트</h1>
            <div class="container-fluid d-flex justify-content-center mb-5">
                <form action="{% url 'stores:search' %}" method="POST">
                    {% csrf_token %}       
                    <div class="input-group mt-5">  
                        <mx-auto>
                            <input name="search" type="search" class="form-control" placeholder="지역, 식당 또는 음식" aria-label="search" aria-describedby="button-addon2" style="width: 30rem; height: 3rem; font-size: xx-large;">
                        </mx-auto>  
                        <button class="btn btn-warning" type="submit" id="button-addon2" style="width: 5rem; font-size: x-large;">검색</button>   
                    </div>  
                </form>  
            </div>  
        </div>
    </header>
    <main>
        <div class="container">
            <div class="container">
                <h1 class="mt-5 ms-5 mb-5 text-center">카테고리 별 맛집 리스트</h1>
            </div>
            <div id="carouselExampleDark" class="carousel carousel-dark slide">
                <div class="carousel-inner">
                    <div class="container-lg">
                    <div class="carousel-item active">
                            <div class="row d-flex justify-content-center mb-2">
                                <div class="col-sm-4 index-carousel-action">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>프랑스 음식</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                            <a href="{% url 'stores:category' '프랑스 음식' %}">
                                                <img src="https://www.obonparis.com/uploads/pharma%20star-13.jpg" style="width: 15rem; height: 10rem;">
                                            </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>브런치 버거 샌드</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '브런치 버거 샌드' %}">
                                                    <img src="https://www.subway.co.kr/upload/menu/Italian_B.M.T_20211231094910899.png" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>이탈리안</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '이탈리안' %}">
                                                    <img src="https://t1.daumcdn.net/cfile/tistory/996E1D345B3F78B107" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>패스트 푸드</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '패스트 푸드' %}">
                                                    <img src="https://cdn.dominos.co.kr/admin/upload/goods/20200311_x8StB1t3.jpg" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                    <div class="carousel-item">
                        <div class="container">
                            <div class="row d-flex justify-content-center mb-2">
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>퓨전 한식</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '퓨전 한식' %}">
                                                    <img src="https://mp-seoul-image-production-s3.mangoplate.com/777663_1605882982842227.jpg?fit=around|512:512&crop=512:512;*,*&output-format=jpg&output-quality=80" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>탕 찌개 전골</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '탕 찌개 전골' %}">
                                                    <img src="https://cdn-pro-web-40-6.cdn-nhncommerce.com/appacompany_godomall_com/data/goods/19/11/46//1000000819/1000000819_detail_184.jpg" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>해산물</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '해산물' %}">
                                                    <img src="https://recipe1.ezmember.co.kr/cache/recipe/2022/05/17/44bb6609cd2302ff3847bfb9e75a79a61.jpg" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>국수 면 요리</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '국수 면 요리' %}">
                                                    <img src="https://t1.daumcdn.net/cfile/tistory/193617254C40DBBF47" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="container">
                            <div class="row d-flex justify-content-center mb-2">
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>닭 오리 요리</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '닭 오리 요리' %}">
                                                    <img src="https://t1.daumcdn.net/cfile/blog/130B514B4E9623B023" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>일식</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '일식' %}">
                                                    <img src="https://premierhotel-group.com/korean/discover/cuisine/img/slider-sp01.jpg" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>소고기</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '소고기' %}">
                                                    <img src="https://cdn.ihanwoo.kr/news/photo/201903/463_850_721.jpg" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="container d-flex justify-content-center">
                                        <div class="row">
                                            <div class="container d-flex justify-content-center">
                                                <p>카페 디저트</p>
                                            </div>
                                            <div class="container d-flex justify-content-center">
                                                <a href="{% url 'stores:category' '카페 디저트' %}">
                                                    <img src="https://static.wixstatic.com/media/b64393_9dccb35b6a134791ba023ffe4843a187~mv2.jpg/v1/fill/w_640,h_686,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/b64393_9dccb35b6a134791ba023ffe4843a187~mv2.jpg" style="width: 15rem; height: 10rem;">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
                <div class="carousel-indicators" style="bottom: -3rem;">
                    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active me-2" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2" class="me-2"></button>
                    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3" class="me-2"></button>
                </div>
            </div>       
        </div>
        
        <hr class='mt-5'>

        <section class='container bg-white ny-3 py-2'>
            <div class='row row-cols-2 row-cols-lg-4'>
                {% for top_store in top_stores %}
                    {% if top_store.thumbnail %}
                        <div class='container'>
                            <img src="{{ top_store.thumbnail.url}}" alt="top_store.thumnail" class='mx-1' style="width: 10rem; height: 10rem;">
                            <div class='d-flex'>
                                <p>{{ top_store.name }}</p>
                                <p class='text-orange'>{{ top_store.store_avg}}</p>
                            </div>
                            <p>{{ top_store.address }} - {{ top_sotre.category }}</p>
                        </div>
                    {% else %}
                    <img src="{% static 'empty-food.jpg' %}" alt="Empty Food Image" class="food-thumbnail-img mx-1" style="width: 10rem; height: 10rem;">
                    {% endif %}
                {% endfor %}
            </div>
        </section>

        <hr class="mt-5">

        <section class="container bg-white my-3 py-2">
            <h1 class="text-center py-3" style="color: orange;">Editor1의 추천 가게</h1>
            {% if editor1_like_stores.count == 0 %}
            <p class="text-body-tertiary text-center">추천 가게가 없습니다</p>
            {% else %}
            <div class="row row-cols-1 row-cols-lg-2">
            {% for store in editor1_like_stores|slice:4 %}
              <div class="col mt-5 d-flex justify-content-center">
                <div class="mb-3">
                  <a href="{% url 'stores:detail' store.pk %}" class="text-decoration-none text-dark">
                  <div class="card d-flex" style="width: 27rem;">
                    <div class="card-img-container ">
                      {% if store.thumbnail %}
                      <img src="{{ store.thumbnail.url }}" class="card-img overflow-hidden" alt="...">
                      {% else %}
                      <img src="{% static 'empty-food.jpg' %}" alt="" class="card-img">
                      {% endif %}
                    </div>
                    <div class="card-body">
                      <div class="d-flex justify-content-center">
                        <h1 class="card-title mt-1">
                          {{ store.name }}
                        </h1>
                        <span class="text-orange position-absolute end-0 me-3">
                          ★ 
                          {% if store.rating_avg %}
                            {{ store.rating_avg|floatformat:1 }}
                          {% else %}
                            0.0
                          {% endif %}
                          ({{ store.review_set.all|length }})
                        </span>
                      </div>
                      <p class="card-text text-center">
                        {% if store.address %}
                        {{ store.address }}
                        {% else %}
                        <span class="text-none-data">등록된 주소가 없습니다.</span>
                        {% endif %}
        
                      </p>
                      <p class="card-text text-center">{{ store.content }}</p>
                    </div>
                  </div>
                </a>
                </div>
              </div>
            {% endfor %}
            </div>
            {% endif %}
          </section>  

        <hr class="mt-5">

        <section class="container-fluid container-lg bg-white my-3 py-2">
            <h1 class="text-center py-3" style="color: orange;">Editor2의 추천 가게</h1>
            {% if editor2_like_stores.count == 0 %}
            <p class="text-body-tertiary text-center">추천 가게가 없습니다</p>
            {% else %}
            <div class="row row-cols-1 row-cols-lg-2">
            {% for store in editor2_like_stores|slice:4 %}
                <div class="col mt-5 d-flex justify-content-center">
                <div class="mb-3">
                    <a href="{% url 'stores:detail' store.pk %}" class="text-decoration-none text-dark">
                    <div class="card d-flex" style="width: 27rem;">
                    <div class="card-img-container ">
                        {% if store.thumbnail %}
                        <img src="{{ store.thumbnail.url }}" class="card-img overflow-hidden" alt="...">
                        {% else %}
                        <img src="{% static 'empty-food.jpg' %}" alt="" class="card-img">
                        {% endif %}
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-center">
                        <h1 class="card-title mt-1">
                            {{ store.name }}
                        </h1>
                        <span class="text-orange position-absolute end-0 me-3">
                            ★ 
                            {% if store.rating_avg %}
                            {{ store.rating_avg|floatformat:1 }}
                            {% else %}
                            0.0
                            {% endif %}
                            ({{ store.review_set.all|length }})
                        </span>
                        </div>
                        <p class="card-text text-center">
                        {% if store.address %}
                        {{ store.address }}
                        {% else %}
                        <span class="text-none-data">등록된 주소가 없습니다.</span>
                        {% endif %}
        
                        </p>
                        <p class="card-text text-center">{{ store.content }}</p>
                    </div>
                    </div>
                </a>
                </div>
                </div>
            {% endfor %}
            </div>
            {% endif %}
        </section>  

    </main>
</div>

{% endblock content %}



